<!DOCTYPE html>
<html lang="fr">

<head>
  <title>AJAX</title>
  <link rel="stylesheet" type="text/css" href="style.css" />
</head>

<body onload="init()">

<!--
<form id="myform" onsubmit="selectionRSS()" action="#">
-->
<form id="myform" onsubmit="selectionRSS()" target="_blank" action="./proxy.php" method="post">

<p>
     <!--<select id="rss_selector">
         <option value="null">--- Sélectionner un flux ---</option>
          <option value="http://www.societe-informatique-de-france.fr/feed/">SIF</option>
          <option value="http://filuns.unice.fr/accueil/@@rss_view">UNS</option>
          <option value="http://pro.clubic.com/actualites.rss">Clubic</option>
     </select>-->
     <!--<select id="rss_selector">
         <option value="null">--- Sélectionner un flux ---</option>
          <option value="SF.xml">SIF</option>
          <option value="uns.xml">UNS</option>
          <option value="clubic.xml">Clubic</option>
     </select>-->
     <select id="rssURL" name="rssURL">
         <option value="null">--- Sélectionner un flux ---</option>
          <option value="http://www.societe-informatique-de-france.fr/feed/">SIF</option>
          <option value="http://filuns.unice.fr/accueil/@@rss_view">UNS</option>
          <option value="http://pro.clubic.com/actualites.rss">Clubic</option>
     </select>

     <input type="submit" value="Envoyer" title="Envoyer" />

</p>
</form>

<div id="rss_affiche">
  
</div>


</body>

<!--
<script type="text/javascript" src="script1.js"></script>
-->

<script type="text/javascript">
    
  window.addEventListener("load", init())
  
  var xmlhttp
  
  function init(){
    xmlhttp = new XMLHttpRequest();
  }
  
  function selectionRSS(){
    //var valeur = document.forms["myform"]["rss_selector"].value
    var valeur = document.forms["myform"]["rssURL"].value
    if(valeur != "null") {
      //alert(valeur)
      xmlhttp.open("GET", valeur, true);
      xmlhttp.addEventListener('readystatechange', function() {
      if (xmlhttp.readyState == 4 && (xmlhttp.status == 200 || xmlhttp.status == 0))
        maCallback(xmlhttp.responseText)
      });
      //xmlhttp.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
      xmlhttp.send(null);
    }
  }
  
  function maCallback(data){
    document.getElementById("rss_affiche").innerText = data;
  }
  
</script>


</html>
