<!DOCTYPE html>
<html>

<head>
  <title> exercice 1 </title>
  <meta charset="utf-8">
  <link rel="stylesheet" href="style.css" />
  <meta name="description" content="Free Web tutorials">
  <meta name="author" content="PERES Richard">
  <meta name="author" content="RIGAUT FranÃ§ois">
  <meta name="keywords" content="HTML,CSS,XML,JavaScript">

</head>

<body id="body">

</body>

<h1 id="titre"> TD2 </h1>

<h2>Balise h2</h2>

<h2>Balise h2.2</h2>

<div>
  bonjour
</div>

<div>
  ola
</div>

<div>
  konichiwa
</div>

<ul class="violet">
  Conversation :
  <li class="rose">hey</li>
  <li class="rose">salut</li>
  <li class="rose">cava</li>
</ul>

<span id="sp"> span </span>

<div id="frameInsert">
  <input type="button" value="DIV" onclick="insertB('div')" />
  <input type="button" value="P" onclick="insertB('p')" />
  <input type="button" value="H2" onclick="insertB('h2')" />
  <input type="text" id="toInsert" />
</div>

<!-- <script type="text/javascript" src="scripts.js"> -->
<script type="text/javascript">
  window.addEventListener("load", init())

	var elemSelected = false;
	
  function init() {

    document.getElementById("titre").setAttribute("style", "background-color:black;color:white");

    document.getElementById("sp").setAttribute("style", "background-color:yellow");

    for (var i = 0; i < document.getElementsByTagName("h2").length; i++)
      document.getElementsByTagName("h2")[i].setAttribute("style", "background-color:lightBlue");

    for (var i = 0; i < document.getElementsByTagName("div").length; i++)
      document.getElementsByTagName("div")[i].setAttribute("style", "background-color:green");

		/*for (var i = 0; i < document.childNodes.length; i++)
      document.childNodes[i].addEventListener('click', select, false);*/
		
    for (var i = 0; i < document.childNodes.length; i++)
      document.childNodes[i].addEventListener('click', select2, false);
  }
	
	/*function select(e){
		if(e.target.attributes.getNamedItem("clr") == undefined){
			var clr = document.createAttribute("clr");
			clr.value = e.target.style.backgroundColor;
			e.target.attributes.setNamedItem(clr);
			e.target.style.backgroundColor = "red";
		}
		else{
			e.target.style.backgroundColor = e.target.attributes.getNamedItem("clr").nodeValue;
			e.target.attributes.removeNamedItem("clr");
		}
	}*/
	
	function select2(e){
		if((!elemSelected || e.target.attributes.getNamedItem("clr") != undefined ) && e.target.parentElement.getAttribute("id") != "frameInsert" && e.target.getAttribute("id") != "frameInsert"){
			if(e.target.attributes.getNamedItem("clr") == undefined){
				var clr = document.createAttribute("clr");
				clr.value = e.target.style.backgroundColor;
				e.target.attributes.setNamedItem(clr);
				e.target.style.backgroundColor = "blue";
				elemSelected = true;
			}
			else{
				e.target.style.backgroundColor = e.target.attributes.getNamedItem("clr").nodeValue;
				e.target.attributes.removeNamedItem("clr");
				elemSelected = false;
			}
		}
	}
	
</script>

</html>
